# Monitoring Directory

**Purpose**: Store context optimization monitoring data and baselines
**Last Updated**: 2025-10-11
**Status**: Gitignored (data files only, README tracked)

---

## üìÅ Directory Contents

### Current Files

**baselines.json**
- Context usage baselines for comparison
- Generated by: `./scripts/establish_baselines.sh`
- Updated: Quarterly or as needed
- Size: ~2-5 KB

**file_size_log.txt**
- File size monitoring log (append-only)
- Generated by: `./scripts/monitor_file_sizes.sh`
- Updated: On each monitoring run
- Size: Grows over time (~1 KB/week)

---

## üîÑ File Management

### Baseline Management

**Create/Update Baselines**:
```bash
./scripts/establish_baselines.sh          # Initial creation
./scripts/establish_baselines.sh --force  # Force update
```

**View Baselines**:
```bash
cat .ai/monitoring/baselines.json | jq '.'
cat .ai/monitoring/baselines.json | jq '.context_budget'
```

### Log Management

**View Recent Entries**:
```bash
tail -20 .ai/monitoring/file_size_log.txt
```

**Search for Issues**:
```bash
grep "ERROR" .ai/monitoring/file_size_log.txt
grep "WARNING" .ai/monitoring/file_size_log.txt
```

**Clean Old Entries** (keep last 90 days):
```bash
# Automated cleanup in weekly_health_check.sh
find .ai/monitoring/ -name "*.txt" -mtime +90 -delete
```

---

## üìä Monitoring Workflow

### Daily Monitoring
```bash
# Quick dashboard check
./scripts/context_dashboard.sh
```

### Weekly Monitoring
```bash
# Comprehensive health check
./scripts/weekly_health_check.sh

# File size monitoring
./scripts/monitor_file_sizes.sh
```

### Quarterly Baseline Updates
```bash
# Update baselines
./scripts/establish_baselines.sh --force

# Compare to previous baseline
diff .ai/monitoring/baselines.json .ai/monitoring/baselines.json.backup
```

---

## üéØ Monitoring Metrics

### Tracked in baselines.json
- Session start token usage
- Status check token usage
- Tool lookup token usage
- File distribution statistics
- Overall markdown file counts

### Tracked in file_size_log.txt
- Individual file sizes vs. limits
- Warning and error thresholds
- Timestamp of each check
- Trend data over time

---

## ‚ö†Ô∏è Alert Thresholds

### File Size Limits
- **Index files**: 100 lines (warning at 80)
- **Status files**: 200 lines (warning at 160)
- **Guide files**: 300 lines (warning at 240)
- **Daily sessions**: 500 lines (warning at 400)
- **Plan files**: 3000 lines (warning at 2400)

### Context Budget Limits
- **Session start**: 300 tokens (critical at 500)
- **Status check**: 150 tokens (critical at 300)
- **Tool lookup**: 100 tokens (critical at 200)
- **Overall session**: 10,000 tokens (critical at 15,000)

---

## üìà Data Retention

### baselines.json
- **Retention**: Keep current + 1 backup
- **Rotation**: Create backup before updates
- **Archive**: Copy to archive on major changes

### file_size_log.txt
- **Retention**: 90 days
- **Cleanup**: Automatic via weekly health check
- **Archive**: Optional export to CSV for analysis

---

## üîß Scripts Using This Directory

### Read Operations
- `./scripts/context_dashboard.sh` - Reads baselines.json
- `./scripts/weekly_health_check.sh` - Reads both files
- `./scripts/monitor_file_sizes.sh` - Reads baselines.json

### Write Operations
- `./scripts/establish_baselines.sh` - Writes baselines.json
- `./scripts/monitor_file_sizes.sh` - Appends to file_size_log.txt

---

## üìö Related Documentation

- **[../index.md](../index.md)** - Session management guide
- **[../permanent/context_budget.json](../permanent/context_budget.json)** - Budget configuration
- **[CONTEXT_OPTIMIZATION_OPERATIONS_GUIDE.md](../../CONTEXT_OPTIMIZATION_OPERATIONS_GUIDE.md)** - Operations guide

---

## üéØ Purpose

This directory enables **proactive context optimization** by:
1. Establishing baseline metrics for comparison
2. Tracking file size growth over time
3. Alerting when files exceed thresholds
4. Providing data for weekly health reports
5. Supporting quarterly optimization reviews

**Result**: Prevents context creep through continuous monitoring

---

**Note**: All monitoring data files are gitignored. Only this README is tracked.

