[
  {
    "cell_number": 19,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[9]\u001b[39m\u001b[32m, line 9\u001b[39m\n\u001b[32m      2\u001b[39m suite_ts = EconometricSuite(\n\u001b[32m      3\u001b[39m     data=df_ts,\n\u001b[32m      4\u001b[39m     target=\u001b[33m'\u001b[39m\u001b[33mpoints\u001b[39m\u001b[33m'\u001b[39m,\n\u001b[32m      5\u001b[39m     time_col=\u001b[33m'\u001b[39m\u001b[33mgame_date\u001b[39m\u001b[33m'\u001b[39m\n\u001b[32m      6\u001b[39m )\n\u001b[32m      8\u001b[39m \u001b[38;5;66;03m# ARIMAX model\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m9\u001b[39m result_arimax = \u001b[43msuite_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     10\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43marimax\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     11\u001b[39m \u001b[43m    \u001b[49m\u001b[43morder\u001b[49m\u001b[43m=\u001b[49m\u001b[43m(\u001b[49m\u001b[32;43m1\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m1\u001b[39;49m\u001b[43m)\u001b[49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# AR(1), no differencing, MA(1)\u001b[39;49;00m\n\u001b[32m     12\u001b[39m \u001b[43m    \u001b[49m\u001b[43mexog\u001b[49m\u001b[43m=\u001b[49m\u001b[43mdf_ts\u001b[49m\u001b[43m[\u001b[49m\u001b[43m[\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mopponent_rating\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m]\u001b[49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[43m    \u001b[49m\u001b[43mseasonal_order\u001b[49m\u001b[43m=\u001b[49m\u001b[43m(\u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m)\u001b[49m\n\u001b[32m     14\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     16\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     17\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mARIMAX RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 21,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[10]\u001b[39m\u001b[32m, line 5\u001b[39m\n\u001b[32m      2\u001b[39m endog_data = df_ts[[\u001b[33m'\u001b[39m\u001b[33mpoints\u001b[39m\u001b[33m'\u001b[39m, \u001b[33m'\u001b[39m\u001b[33massists\u001b[39m\u001b[33m'\u001b[39m, \u001b[33m'\u001b[39m\u001b[33mrebounds\u001b[39m\u001b[33m'\u001b[39m]]\n\u001b[32m      3\u001b[39m exog_data = df_ts[[\u001b[33m'\u001b[39m\u001b[33mopponent_rating\u001b[39m\u001b[33m'\u001b[39m]]\n\u001b[32m----> \u001b[39m\u001b[32m5\u001b[39m result_varmax = \u001b[43msuite_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mvarmax\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      7\u001b[39m \u001b[43m    \u001b[49m\u001b[43mendog_data\u001b[49m\u001b[43m=\u001b[49m\u001b[43mendog_data\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      8\u001b[39m \u001b[43m    \u001b[49m\u001b[43morder\u001b[49m\u001b[43m=\u001b[49m\u001b[43m(\u001b[49m\u001b[32;43m1\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m1\u001b[39;49m\u001b[43m)\u001b[49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# VAR(1) + MA(1)\u001b[39;49;00m\n\u001b[32m      9\u001b[39m \u001b[43m    \u001b[49m\u001b[43mexog\u001b[49m\u001b[43m=\u001b[49m\u001b[43mexog_data\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     10\u001b[39m \u001b[43m    \u001b[49m\u001b[43mtrend\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mc\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Include constant\u001b[39;49;00m\n\u001b[32m     11\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     14\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mVARMAX RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 23,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[11]\u001b[39m\u001b[32m, line 3\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# MSTL decomposition with multiple seasonal periods\u001b[39;00m\n\u001b[32m      2\u001b[39m \u001b[38;5;66;03m# Using 7-day (weekly) and 30-day (monthly) patterns\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m3\u001b[39m result_mstl = \u001b[43msuite_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      4\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mmstl\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mperiods\u001b[49m\u001b[43m=\u001b[49m\u001b[43m[\u001b[49m\u001b[32;43m7\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m30\u001b[39;49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Weekly and monthly seasonality\u001b[39;49;00m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mwindows\u001b[49m\u001b[43m=\u001b[49m\u001b[43m[\u001b[49m\u001b[32;43m7\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m15\u001b[39;49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Seasonal windows\u001b[39;49;00m\n\u001b[32m      7\u001b[39m \u001b[43m    \u001b[49m\u001b[43miterate\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m2\u001b[39;49m\n\u001b[32m      8\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     10\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     11\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mMSTL RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 25,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[12]\u001b[39m\u001b[32m, line 2\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# STL decomposition\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m2\u001b[39m result_stl = \u001b[43msuite_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      3\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mstl\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      4\u001b[39m \u001b[43m    \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m7\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Weekly seasonality\u001b[39;49;00m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mseasonal\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m7\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Seasonal smoother\u001b[39;49;00m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mtrend\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mNone\u001b[39;49;00m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Auto-select trend window\u001b[39;49;00m\n\u001b[32m      7\u001b[39m \u001b[43m    \u001b[49m\u001b[43mrobust\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mTrue\u001b[39;49;00m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Robust to outliers\u001b[39;49;00m\n\u001b[32m      8\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     10\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     11\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mSTL RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 33,
    "error_type": "TypeError",
    "error_value": "MixtureCureFitter.__init__() missing 1 required positional argument: 'base_fitter'",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mTypeError\u001b[39m                                 Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[16]\u001b[39m\u001b[32m, line 2\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# Cure model: Some players have very long careers (\"cured\" = Hall of Fame caliber)\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m2\u001b[39m result_cure = \u001b[43msuite_survival\u001b[49m\u001b[43m.\u001b[49m\u001b[43msurvival_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      3\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mcure\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      4\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcure_formula\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mdraft_round + C(position)\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43msurvival_formula\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mdraft_round + C(position)\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mtimeline\u001b[49m\u001b[43m=\u001b[49m\u001b[43mnp\u001b[49m\u001b[43m.\u001b[49m\u001b[43marange\u001b[49m\u001b[43m(\u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m20\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[32;43m0.5\u001b[39;49m\u001b[43m)\u001b[49m\n\u001b[32m      7\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m      9\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     10\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mCURE MODEL RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:1587\u001b[39m, in \u001b[36mEconometricSuite.survival_analysis\u001b[39m\u001b[34m(self, duration_col, event_col, method, **kwargs)\u001b[39m\n\u001b[32m   1574\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m._create_suite_result(\n\u001b[32m   1575\u001b[39m         method_category=MethodCategory.SURVIVAL_ANALYSIS,\n\u001b[32m   1576\u001b[39m         method_used=\u001b[33m\"\u001b[39m\u001b[33mFine-Gray Competing Risks\u001b[39m\u001b[33m\"\u001b[39m,\n\u001b[32m   (...)\u001b[39m\u001b[32m   1582\u001b[39m         ),\n\u001b[32m   1583\u001b[39m     )\n\u001b[32m   1585\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33mcure\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mor\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33mcure_model\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m   1586\u001b[39m     \u001b[38;5;66;03m# Mixture cure model\u001b[39;00m\n\u001b[32m-> \u001b[39m\u001b[32m1587\u001b[39m     result = \u001b[43manalyzer\u001b[49m\u001b[43m.\u001b[49m\u001b[43mcure_model\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m   1588\u001b[39m \u001b[43m        \u001b[49m\u001b[43mcure_formula\u001b[49m\u001b[43m=\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m.\u001b[49m\u001b[43mget\u001b[49m\u001b[43m(\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mcure_formula\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m)\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1589\u001b[39m \u001b[43m        \u001b[49m\u001b[43msurvival_formula\u001b[49m\u001b[43m=\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m.\u001b[49m\u001b[43mget\u001b[49m\u001b[43m(\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43msurvival_formula\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m)\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1590\u001b[39m \u001b[43m        \u001b[49m\u001b[43mtimeline\u001b[49m\u001b[43m=\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m.\u001b[49m\u001b[43mget\u001b[49m\u001b[43m(\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mtimeline\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m)\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1591\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1592\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m._create_suite_result(\n\u001b[32m   1593\u001b[39m         method_category=MethodCategory.SURVIVAL_ANALYSIS,\n\u001b[32m   1594\u001b[39m         method_used=\u001b[33m\"\u001b[39m\u001b[33mMixture Cure Model\u001b[39m\u001b[33m\"\u001b[39m,\n\u001b[32m   (...)\u001b[39m\u001b[32m   1601\u001b[39m         ),\n\u001b[32m   1602\u001b[39m     )\n\u001b[32m   1604\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33mrecurrent_events\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mor\u001b[39;00m method \u001b[38;5;129;01min\u001b[39;00m [\u001b[33m\"\u001b[39m\u001b[33mpwp\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33mag\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33mwlw\u001b[39m\u001b[33m\"\u001b[39m]:\n\u001b[32m   1605\u001b[39m     \u001b[38;5;66;03m# Recurrent events model\u001b[39;00m\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/survival_analysis.py:1367\u001b[39m, in \u001b[36mSurvivalAnalyzer.cure_model\u001b[39m\u001b[34m(self, cure_formula, survival_formula, timeline)\u001b[39m\n\u001b[32m   1364\u001b[39m     survival_formula = cure_formula  \u001b[38;5;66;03m# Use same formula\u001b[39;00m\n\u001b[32m   1366\u001b[39m \u001b[38;5;66;03m# Initialize and fit mixture cure model\u001b[39;00m\n\u001b[32m-> \u001b[39m\u001b[32m1367\u001b[39m mcf = \u001b[43mMixtureCureFitter\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1369\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m   1370\u001b[39m     \u001b[38;5;66;03m# Fit the model\u001b[39;00m\n\u001b[32m   1371\u001b[39m     mcf.fit(\n\u001b[32m   1372\u001b[39m         \u001b[38;5;28mself\u001b[39m.data,\n\u001b[32m   1373\u001b[39m         duration_col=\u001b[38;5;28mself\u001b[39m.duration_col,\n\u001b[32m   (...)\u001b[39m\u001b[32m   1378\u001b[39m         },\n\u001b[32m   1379\u001b[39m     )\n",
      "\u001b[31mTypeError\u001b[39m: MixtureCureFitter.__init__() missing 1 required positional argument: 'base_fitter'"
    ]
  },
  {
    "cell_number": 39,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[19]\u001b[39m\u001b[32m, line 11\u001b[39m\n\u001b[32m      3\u001b[39m endog_johansen = df_team[[\u001b[33m'\u001b[39m\u001b[33mpoint_diff\u001b[39m\u001b[33m'\u001b[39m, \u001b[33m'\u001b[39m\u001b[33moffensive_rating\u001b[39m\u001b[33m'\u001b[39m]]\n\u001b[32m      5\u001b[39m suite_adv_ts = EconometricSuite(\n\u001b[32m      6\u001b[39m     data=df_team,\n\u001b[32m      7\u001b[39m     target=\u001b[33m'\u001b[39m\u001b[33mpoint_diff\u001b[39m\u001b[33m'\u001b[39m,\n\u001b[32m      8\u001b[39m     time_col=\u001b[33m'\u001b[39m\u001b[33mgame_date\u001b[39m\u001b[33m'\u001b[39m\n\u001b[32m      9\u001b[39m )\n\u001b[32m---> \u001b[39m\u001b[32m11\u001b[39m result_johansen = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     12\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mjohansen\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[43m    \u001b[49m\u001b[43mendog_data\u001b[49m\u001b[43m=\u001b[49m\u001b[43mendog_johansen\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     14\u001b[39m \u001b[43m    \u001b[49m\u001b[43mdet_order\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m0\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# No deterministic terms\u001b[39;49;00m\n\u001b[32m     15\u001b[39m \u001b[43m    \u001b[49m\u001b[43mk_ar_diff\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m1\u001b[39;49m\u001b[43m   \u001b[49m\u001b[38;5;66;43;03m# Lag order\u001b[39;49;00m\n\u001b[32m     16\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     18\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     19\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mJOHANSEN COINTEGRATION TEST RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 41,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[20]\u001b[39m\u001b[32m, line 2\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# Granger causality: Does defensive rating \"Granger-cause\" offensive rating?\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m2\u001b[39m result_granger = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      3\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mgranger\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      4\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcaused_series\u001b[49m\u001b[43m=\u001b[49m\u001b[43mdf_team\u001b[49m\u001b[43m[\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43moffensive_rating\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcausing_series\u001b[49m\u001b[43m=\u001b[49m\u001b[43mdf_team\u001b[49m\u001b[43m[\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mdefensive_rating\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmaxlag\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m5\u001b[39;49m\n\u001b[32m      7\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m      9\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     10\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mGRANGER CAUSALITY TEST RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 43,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[21]\u001b[39m\u001b[32m, line 4\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# VAR model for points, assists, rebounds\u001b[39;00m\n\u001b[32m      2\u001b[39m endog_var = df_team[[\u001b[33m'\u001b[39m\u001b[33mpoints\u001b[39m\u001b[33m'\u001b[39m, \u001b[33m'\u001b[39m\u001b[33massists\u001b[39m\u001b[33m'\u001b[39m, \u001b[33m'\u001b[39m\u001b[33mrebounds\u001b[39m\u001b[33m'\u001b[39m]]\n\u001b[32m----> \u001b[39m\u001b[32m4\u001b[39m result_var = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mvar\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mendog_data\u001b[49m\u001b[43m=\u001b[49m\u001b[43mendog_var\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      7\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmaxlags\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m5\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      8\u001b[39m \u001b[43m    \u001b[49m\u001b[43mic\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43maic\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Use AIC for lag selection\u001b[39;49;00m\n\u001b[32m      9\u001b[39m \u001b[43m    \u001b[49m\u001b[43mtrend\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mc\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Include constant\u001b[39;49;00m\n\u001b[32m     10\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     12\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     13\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mVAR MODEL RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 45,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[22]\u001b[39m\u001b[32m, line 9\u001b[39m\n\u001b[32m      6\u001b[39m residuals = fit_simple.resid\n\u001b[32m      8\u001b[39m \u001b[38;5;66;03m# Run diagnostics\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m9\u001b[39m result_diag = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     10\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mdiagnostics\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     11\u001b[39m \u001b[43m    \u001b[49m\u001b[43mresiduals\u001b[49m\u001b[43m=\u001b[49m\u001b[43mresiduals\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     12\u001b[39m \u001b[43m    \u001b[49m\u001b[43mlags\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m10\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[43m    \u001b[49m\u001b[43malpha\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m0.05\u001b[39;49m\n\u001b[32m     14\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     16\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     17\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mTIME SERIES DIAGNOSTICS RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 48,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[23]\u001b[39m\u001b[32m, line 4\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# VECM for cointegrated series\u001b[39;00m\n\u001b[32m      2\u001b[39m endog_vecm = df_team[[\u001b[33m'\u001b[39m\u001b[33mpoints\u001b[39m\u001b[33m'\u001b[39m, \u001b[33m'\u001b[39m\u001b[33moffensive_rating\u001b[39m\u001b[33m'\u001b[39m]]\n\u001b[32m----> \u001b[39m\u001b[32m4\u001b[39m result_vecm = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mvecm\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      6\u001b[39m \u001b[43m    \u001b[49m\u001b[43mendog_data\u001b[49m\u001b[43m=\u001b[49m\u001b[43mendog_vecm\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      7\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcoint_rank\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m1\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Assume 1 cointegrating relationship\u001b[39;49;00m\n\u001b[32m      8\u001b[39m \u001b[43m    \u001b[49m\u001b[43mk_ar_diff\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m2\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m   \u001b[49m\u001b[38;5;66;43;03m# 2 lags in differences\u001b[39;49;00m\n\u001b[32m      9\u001b[39m \u001b[43m    \u001b[49m\u001b[43mdeterministic\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mci\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# Constant inside cointegration\u001b[39;49;00m\n\u001b[32m     10\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     12\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     13\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mVECM RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 50,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[24]\u001b[39m\u001b[32m, line 12\u001b[39m\n\u001b[32m      9\u001b[39m model_breaks = OLS(y_breaks, X_breaks).fit()\n\u001b[32m     11\u001b[39m \u001b[38;5;66;03m# Test for structural breaks\u001b[39;00m\n\u001b[32m---> \u001b[39m\u001b[32m12\u001b[39m result_breaks = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mstructural_breaks\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     14\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmodel_result\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmodel_breaks\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     15\u001b[39m \u001b[43m    \u001b[49m\u001b[43mtest_type\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mcusum\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# CUSUM test\u001b[39;49;00m\n\u001b[32m     16\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     18\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     19\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mSTRUCTURAL BREAKS TEST RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 52,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[25]\u001b[39m\u001b[32m, line 2\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# Breusch-Godfrey test for autocorrelation\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m2\u001b[39m result_bg = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      3\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mbreusch_godfrey\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      4\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmodel_result\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmodel_breaks\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mnlags\u001b[49m\u001b[43m=\u001b[49m\u001b[32;43m5\u001b[39;49m\n\u001b[32m      6\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m      8\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m      9\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mBREUSCH-GODFREY TEST RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 54,
    "error_type": "ValueError",
    "error_value": "Data must have DatetimeIndex or specify time_column",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[26]\u001b[39m\u001b[32m, line 2\u001b[39m\n\u001b[32m      1\u001b[39m \u001b[38;5;66;03m# Heteroscedasticity test (Breusch-Pagan)\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m2\u001b[39m result_het = \u001b[43msuite_adv_ts\u001b[49m\u001b[43m.\u001b[49m\u001b[43mtime_series_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m      3\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mheteroscedasticity\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m      4\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmodel_result\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmodel_breaks\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m      5\u001b[39m \u001b[43m    \u001b[49m\u001b[43mtest_type\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mbreusch_pagan\u001b[39;49m\u001b[33;43m'\u001b[39;49m\n\u001b[32m      6\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m      8\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m      9\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mHETEROSCEDASTICITY TEST RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:725\u001b[39m, in \u001b[36mEconometricSuite.time_series_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m    722\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28mself\u001b[39m.target \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    723\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mtarget column must be specified for time series analysis\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m725\u001b[39m analyzer = \u001b[43mTimeSeriesAnalyzer\u001b[49m\u001b[43m(\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mdata\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtarget_column\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtarget\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    727\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m method == \u001b[33m\"\u001b[39m\u001b[33marima\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m    728\u001b[39m     \u001b[38;5;66;03m# Set default order if not provided\u001b[39;00m\n\u001b[32m    729\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[33m\"\u001b[39m\u001b[33morder\u001b[39m\u001b[33m\"\u001b[39m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m kwargs:\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/time_series.py:474\u001b[39m, in \u001b[36mTimeSeriesAnalyzer.__init__\u001b[39m\u001b[34m(self, data, target_column, time_column, freq, mlflow_experiment)\u001b[39m\n\u001b[32m    472\u001b[39m \u001b[38;5;66;03m# Ensure DatetimeIndex\u001b[39;00m\n\u001b[32m    473\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(\u001b[38;5;28mself\u001b[39m.data.index, pd.DatetimeIndex):\n\u001b[32m--> \u001b[39m\u001b[32m474\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\u001b[33m\"\u001b[39m\u001b[33mData must have DatetimeIndex or specify time_column\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m    476\u001b[39m \u001b[38;5;66;03m# Sort by time\u001b[39;00m\n\u001b[32m    477\u001b[39m \u001b[38;5;28mself\u001b[39m.data = \u001b[38;5;28mself\u001b[39m.data.sort_index()\n",
      "\u001b[31mValueError\u001b[39m: Data must have DatetimeIndex or specify time_column"
    ]
  },
  {
    "cell_number": 58,
    "error_type": "TypeError",
    "error_value": "mcp_server.panel_data.PanelDataAnalyzer.first_difference() got multiple values for keyword argument 'formula'",
    "traceback": [
      "\u001b[31m---------------------------------------------------------------------------\u001b[39m",
      "\u001b[31mTypeError\u001b[39m                                 Traceback (most recent call last)",
      "\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[28]\u001b[39m\u001b[32m, line 10\u001b[39m\n\u001b[32m      2\u001b[39m suite_panel = EconometricSuite(\n\u001b[32m      3\u001b[39m     data=df_panel,\n\u001b[32m      4\u001b[39m     entity_col=\u001b[33m'\u001b[39m\u001b[33mplayer_id\u001b[39m\u001b[33m'\u001b[39m,\n\u001b[32m      5\u001b[39m     time_col=\u001b[33m'\u001b[39m\u001b[33myear\u001b[39m\u001b[33m'\u001b[39m,\n\u001b[32m      6\u001b[39m     target=\u001b[33m'\u001b[39m\u001b[33mpoints\u001b[39m\u001b[33m'\u001b[39m\n\u001b[32m      7\u001b[39m )\n\u001b[32m      9\u001b[39m \u001b[38;5;66;03m# First-difference OLS\u001b[39;00m\n\u001b[32m---> \u001b[39m\u001b[32m10\u001b[39m result_fd = \u001b[43msuite_panel\u001b[49m\u001b[43m.\u001b[49m\u001b[43mpanel_analysis\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     11\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmethod\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mfirst_diff\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     12\u001b[39m \u001b[43m    \u001b[49m\u001b[43mformula\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mpoints ~ minutes + age\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcluster_entity\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mTrue\u001b[39;49;00m\n\u001b[32m     14\u001b[39m \u001b[43m)\u001b[49m\n\u001b[32m     16\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33m=\u001b[39m\u001b[33m\"\u001b[39m * \u001b[32m60\u001b[39m)\n\u001b[32m     17\u001b[39m \u001b[38;5;28mprint\u001b[39m(\u001b[33m\"\u001b[39m\u001b[33mFIRST-DIFFERENCE OLS RESULTS\u001b[39m\u001b[33m\"\u001b[39m)\n",
      "\u001b[36mFile \u001b[39m\u001b[32m~/nba-mcp-synthesis/mcp_server/econometric_suite.py:1050\u001b[39m, in \u001b[36mEconometricSuite.panel_analysis\u001b[39m\u001b[34m(self, method, **kwargs)\u001b[39m\n\u001b[32m   1047\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m method \u001b[38;5;129;01min\u001b[39;00m [\u001b[33m\"\u001b[39m\u001b[33mfirst_diff\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33mfd\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33mfirst_difference\u001b[39m\u001b[33m\"\u001b[39m]:\n\u001b[32m   1048\u001b[39m     \u001b[38;5;66;03m# First-difference OLS\u001b[39;00m\n\u001b[32m   1049\u001b[39m     formula_str = kwargs.get(\u001b[33m\"\u001b[39m\u001b[33mformula\u001b[39m\u001b[33m\"\u001b[39m, formula)\n\u001b[32m-> \u001b[39m\u001b[32m1050\u001b[39m     result = analyzer.first_difference(formula=formula_str, **kwargs)\n\u001b[32m   1051\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m._create_suite_result(\n\u001b[32m   1052\u001b[39m         method_category=MethodCategory.PANEL_DATA,\n\u001b[32m   1053\u001b[39m         method_used=\u001b[33m\"\u001b[39m\u001b[33mFirst-Difference OLS\u001b[39m\u001b[33m\"\u001b[39m,\n\u001b[32m   (...)\u001b[39m\u001b[32m   1056\u001b[39m         r_squared=result.r_squared,\n\u001b[32m   1057\u001b[39m     )\n\u001b[32m   1059\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m method \u001b[38;5;129;01min\u001b[39;00m [\u001b[33m\"\u001b[39m\u001b[33mdiff_gmm\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33marellano_bond\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33mab_gmm\u001b[39m\u001b[33m\"\u001b[39m, \u001b[33m\"\u001b[39m\u001b[33mdifference_gmm\u001b[39m\u001b[33m\"\u001b[39m]:\n\u001b[32m   1060\u001b[39m     \u001b[38;5;66;03m# Arellano-Bond Difference GMM\u001b[39;00m\n",
      "\u001b[31mTypeError\u001b[39m: mcp_server.panel_data.PanelDataAnalyzer.first_difference() got multiple values for keyword argument 'formula'"
    ]
  }
]